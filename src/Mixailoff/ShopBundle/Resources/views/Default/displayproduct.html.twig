{% extends '::base.html.twig' %}
{% block title %}{{ product.title }}{% endblock %}
{% block body %}

    <br><br>
    <div class="container">
        <div class="card">
            <div class="container-fliud">
                <div class="wrapper row">
                    <div class="preview col-md-6">
                        <div class="preview-pic tab-content">
                            <div class="tab-pane active" id="pic-1">
                                <img src="/images/productimages/{{ product.image }}"
                                     style="width: 500px"></div>
                        </div>
                    </div>
                    <div class="details col-md-6">
                        <h3 class="product-title">{{ product.title }}</h3>
                        <h5>Category: {{ product.productcategory.name }}</h5>
                        <div class="rating">
                            <div class="stars">
                                <span class="fa fa-star checked"></span>
                                <span class="fa fa-star checked"></span>
                                <span class="fa fa-star checked"></span>
                                <span class="fa fa-star"></span>
                                <span class="fa fa-star"></span>
                            </div>
                            <span class="review-no">41 reviews</span>
                        </div>
                        <p class="product-description">{{ product.description }}</p>
                        <h4 class="price">current price:
                            <span>
                                {% set promoPrice = promoServ.calculatePromotedPrice(product) %}
                                {% if promoPrice != product.price %}
                                    <del style="color: gray;"><h5>${{ product.price|number_format(2) }}</h5></del>
                                    ${{ promoPrice|number_format(2) }}
                                {% else %}
                                    ${{ product.price|number_format(2) }}
                                {% endif %}
                            </span></h4>
                        <h5>Quantity left: {{ product.quantity }}</h5>
                        <div class="action">
                            {% if app.user %}
                                <form action="{{ path('mix_s_cart_addproduct', {productId: product.id}) }}"
                                      method="post">
                                    Quantity:
                                    <input type="number" value="1" title="quantity" name="quantity" min="1"
                                           max="{{ product.quantity }}" style="width: 3em">
                                    <button class="add-to-cart btn btn-default" type="submit">add to cart</button>
                                </form>
                            {% else %}
                                <a href="{{ path('fos_user_security_login') }}">
                                    <button class="add-to-cart btn btn-default" type="button">Login to add to cart
                                    </button>
                                </a>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

{% endblock %}